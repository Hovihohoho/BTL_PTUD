/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package gui.card;

import entity.Ban;
import entity.NhanVien;
import gui.datBan.Frame_DatBan;
import java.net.URL;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;

/**
 *
 * @author Admin
 */
public class Card_Ban extends javax.swing.JPanel {
    private Ban ban;
    private NhanVien nhanvien;
    /**
     * Creates new form Card_Ban
     */
    public Card_Ban() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        card_ban = new javax.swing.JPanel();
        img = new javax.swing.JLabel();
        lbmaban = new javax.swing.JLabel();
        lbsoghe = new javax.swing.JLabel();
        lbtrangthai = new javax.swing.JLabel();
        btn_DatBan = new javax.swing.JButton();

        card_ban.setBackground(new java.awt.Color(255, 255, 255));
        card_ban.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));

        img.setBackground(new java.awt.Color(233, 228, 240));
        img.setOpaque(true);

        lbmaban.setFont(new java.awt.Font("Segoe UI", 1, 16)); // NOI18N
        lbmaban.setForeground(new java.awt.Color(108, 91, 123));
        lbmaban.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbmaban.setText("Title");

        lbsoghe.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        lbsoghe.setForeground(new java.awt.Color(108, 91, 123));
        lbsoghe.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbsoghe.setText("Value");

        lbtrangthai.setFont(new java.awt.Font("Segoe UI", 0, 14)); // NOI18N
        lbtrangthai.setForeground(new java.awt.Color(108, 91, 123));
        lbtrangthai.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lbtrangthai.setText("Value");

        btn_DatBan.setBackground(new java.awt.Color(0, 102, 102));
        btn_DatBan.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        btn_DatBan.setForeground(new java.awt.Color(255, 255, 255));
        btn_DatBan.setText("Đặt bàn");
        btn_DatBan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_DatBanActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout card_banLayout = new javax.swing.GroupLayout(card_ban);
        card_ban.setLayout(card_banLayout);
        card_banLayout.setHorizontalGroup(
            card_banLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(card_banLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(card_banLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(btn_DatBan, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(lbsoghe, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(lbmaban, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(lbtrangthai, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, card_banLayout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(img, javax.swing.GroupLayout.PREFERRED_SIZE, 178, javax.swing.GroupLayout.PREFERRED_SIZE))
        );
        card_banLayout.setVerticalGroup(
            card_banLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(card_banLayout.createSequentialGroup()
                .addComponent(img, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(lbmaban, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(lbsoghe, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(lbtrangthai, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(btn_DatBan, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(card_ban, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(card_ban, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
        );
    }// </editor-fold>//GEN-END:initComponents

    private void btn_DatBanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_DatBanActionPerformed
        // TODO add your handling code here:
        if (ban != null && !ban.getTrangThaiBan().equalsIgnoreCase("Đặt trước")) {
//            guiHoaDon(ban); // Gọi hàm xử lý khi nhấn "Đặt bàn"
            Frame_DatBan db = new Frame_DatBan(ban, nhanvien);
            db.setVisible(true);
        }else {
            // Nếu điều kiện sai, hiển thị thông báo lỗi
            JOptionPane.showMessageDialog(this, "Lỗi: Bàn đã được đặt trước!", "Thông báo Lỗi", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_btn_DatBanActionPerformed
    
    public void setBanData(Ban ban, NhanVien nhanVien) {
        // Thiết lập các thuộc tính hiển thị cho Card_Ban từ đối tượng Ban
        this.ban = ban;
        this.nhanvien = nhanVien;
        lbmaban.setText("Mã bàn: " + ban.getMaBan()); 
        lbsoghe.setText("Số ghế: " + ban.getSoGhe());
        lbtrangthai.setText("Trạng thái: " + ban.getTrangThaiBan());
        
        String trangThai = ban.getTrangThaiBan().trim();
        
        String iconPath = null;
        if (trangThai.equalsIgnoreCase("Trống")) {
            iconPath = "icon/table_green.png";
        } else if (trangThai.equalsIgnoreCase("Đang sử dụng")) {
            iconPath = "icon/table_gray.png";
        } else {
            iconPath = "icon/table_red.png";
        }
        
        URL iconUrl = getClass().getClassLoader().getResource(iconPath);
        if (iconUrl != null) {
            ImageIcon icon = new ImageIcon(iconUrl);
            img.setIcon(icon);
        } else {
            // Xử lý trường hợp không tìm thấy tệp hình ảnh
            System.err.println("Không tìm thấy tệp biểu tượng: " + iconPath);
            img.setIcon(null); // Hoặc gán biểu tượng mặc định
        }
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btn_DatBan;
    private javax.swing.JPanel card_ban;
    private javax.swing.JLabel img;
    private javax.swing.JLabel lbmaban;
    private javax.swing.JLabel lbsoghe;
    private javax.swing.JLabel lbtrangthai;
    // End of variables declaration//GEN-END:variables
}
